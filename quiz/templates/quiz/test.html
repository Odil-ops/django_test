{% extends 'quiz/base.html' %}

{% block title %}Test Jarayoni{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
    <!-- Header -->
    <div class="flex justify-between items-center mb-8 glass-card p-4">
        <div>
            <h2 class="text-xl font-bold">{{ module.title }}</h2>
            <p class="text-gray-400 text-sm">Nomzod: <span class="text-white">{{ full_name }}</span></p>
        </div>
        <div class="text-right">
            <div class="text-2xl font-mono text-blue-400" id="timer">00:00</div>
            <p class="text-xs text-gray-500">Vaqt ketmoqda</p>
        </div>
    </div>

    <form method="post" action="{% url 'quiz:test' module.id %}">
        {% csrf_token %}
        
        {% for question in questions %}
        <div class="glass-card p-6 mb-6">
            <div class="flex items-start space-x-4 mb-4">
                <span class="bg-blue-600/20 text-blue-300 w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-full font-bold">
                    {{ forloop.counter }}
                </span>
                <p class="text-lg font-medium pt-1">{{ question.text }}</p>
            </div>
            
            <div class="space-y-3 ml-12">
                {% for choice in question.choices.all %}
                <label class="flex items-center space-x-3 p-3 rounded cursor-pointer hover:bg-white/5 transition border border-transparent hover:border-blue-500/30">
                    <input type="radio" name="question_{{ question.id }}" value="{{ choice.id }}" required
                           class="form-radio h-5 w-5 text-blue-600 bg-gray-700 border-gray-500 focus:ring-blue-500">
                    <span>{{ choice.text }}</span>
                </label>
                {% endfor %}
            </div>
        </div>
        {% endfor %}

        <div class="glass-card p-6 sticky bottom-4">
            <button type="submit" class="w-full btn-success py-3 text-xl shadow-lg">
                <i class="fas fa-check-circle mr-2"></i> Testni Yakunlash
            </button>
        </div>
    </form>
</div>

<script>
    // Simple Timer
    let seconds = 0;
    const timerEl = document.getElementById('timer');
    setInterval(() => {
        seconds++;
        const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
        const secs = (seconds % 60).toString().padStart(2, '0');
        timerEl.textContent = `${mins}:${secs}`;
    }, 1000);
</script>
{% endblock %}
